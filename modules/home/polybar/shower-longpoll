#!/usr/bin/env nix-shell
#!nix-shell -i bash -p inotify-tools dateutils

set -e

while true; do
	if [ -f ~/Sync/.last-shower ]; then
		ddiff "$(cat ~/Sync/.last-shower)" now -f '%d:%H'
	else
		echo '?:?'
		continue
	fi
	# wait for changes to the file, but timeout eventually so the relative clock ticks either way
	inotifywait -q ~/Sync/.last-shower --timeout 10
done
